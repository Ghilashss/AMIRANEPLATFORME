# üìÑ Guide Impression Bordereau 10x15 cm

## üìè Format du Bordereau

Le bordereau d'impression est configur√© pour s'imprimer sur **papier 10x15 cm** (100x150 mm).

### Dimensions Exactes
- **Largeur** : 10 cm (100 mm)
- **Hauteur** : 15 cm (150 mm)
- **Format** : √âtiquette postale standard
- **Orientation** : Portrait

---

## ‚öôÔ∏è Configuration CSS

### 1. R√®gle @page

```css
@media print {
    @page {
        size: 100mm 150mm; /* Format √©tiquette 10x15 cm */
        margin: 0;
        padding: 0;
    }
}
```

**R√¥le** : D√©finit la taille de la page d'impression pour que le navigateur utilise le bon format.

### 2. Conteneur HTML/Body

```css
html, body {
    margin: 0 !important;
    padding: 0 !important;
    width: 100mm !important;
    height: 150mm !important;
    overflow: hidden !important;
}
```

**R√¥le** : Force le document entier √† 10x15 cm, sans marges ni d√©bordement.

### 3. Wrapper du Ticket

```css
.ticket-wrapper {
    width: 100mm !important;
    height: 150mm !important;
    min-width: 100mm !important;
    min-height: 150mm !important;
    max-width: 100mm !important;
    max-height: 150mm !important;
    padding: 3mm !important;
    border: 2px solid #000 !important;
    box-sizing: border-box !important;
}
```

**R√¥le** : Conteneur principal du bordereau avec dimensions fixes et bordure noire.

---

## üñ®Ô∏è Configuration Imprimante

### Param√®tres Recommand√©s

#### Google Chrome / Edge
1. Ouvrir **Imprimer** (Ctrl+P)
2. **Mise en page** :
   - Format : **Personnalis√©**
   - Largeur : **100 mm**
   - Hauteur : **150 mm**
3. **Marges** : **Aucune** (0 mm)
4. **√âchelle** : **100%** (pas d'ajustement)
5. **Graphiques en arri√®re-plan** : **Activ√©** ‚úÖ
6. **Orientation** : **Portrait**

#### Firefox
1. Ouvrir **Imprimer** (Ctrl+P)
2. **Options de page** :
   - Format : **Personnalis√©**
   - Largeur : **10 cm**
   - Hauteur : **15 cm**
3. **Marges** : **Personnalis√©es** ‚Üí **0** pour toutes
4. **Imprimer les arri√®re-plans** : **Coch√©** ‚úÖ
5. **√âchelle** : **100%**

---

## üé® Contenu du Bordereau

### Structure du Bordereau (de haut en bas)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Date/Heure          Ticket de Livraison‚îÇ ‚Üê En-t√™te (6pt)
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [LOGO]                    Wilaya: 16   ‚îÇ
‚îÇ AMIRANE EXPRESS           Code: AG2    ‚îÇ ‚Üê Header avec logo et infos
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ N¬∞ Tracking: ABC123456789              ‚îÇ
‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà               ‚îÇ ‚Üê Code-barres
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üì§ EXP√âDITEUR                          ‚îÇ
‚îÇ Nom: Ahmed Benali                      ‚îÇ
‚îÇ T√©l: 0555 12 34 56                     ‚îÇ
‚îÇ Wilaya: Alger                          ‚îÇ ‚Üê Section exp√©diteur
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üì• DESTINATAIRE                        ‚îÇ
‚îÇ Nom: Fatima Zohra                      ‚îÇ
‚îÇ T√©l: 0666 78 90 12                     ‚îÇ
‚îÇ Wilaya: Oran                           ‚îÇ
‚îÇ Adresse: Rue de la Libert√©, Oran      ‚îÇ ‚Üê Section destinataire
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üì¶ D√âTAILS COLIS                       ‚îÇ
‚îÇ Service: Domicile                      ‚îÇ
‚îÇ Wilaya Exp: Alger                      ‚îÇ
‚îÇ Prix: 1200.00 DA                       ‚îÇ
‚îÇ Frais: 300.00 DA                       ‚îÇ
‚îÇ Total: 1500.00 DA                      ‚îÇ
‚îÇ Poids: 2 KG                            ‚îÇ
‚îÇ Contenu: V√™tements                     ‚îÇ ‚Üê D√©tails colis
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Date d'exp√©dition: 19/10/2025          ‚îÇ ‚Üê Date
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Signature:                             ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ Date: 19/10/2025                       ‚îÇ ‚Üê Signature
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [Texte arabe]                          ‚îÇ ‚Üê D√©claration
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Tailles de Police

| √âl√©ment | Taille | Poids |
|---------|--------|-------|
| Date en-t√™te | 6pt | Bold |
| Num√©ro tracking | 16pt | Bold |
| Titre sections | 8pt | Bold |
| Contenu sections | 7pt | Normal |
| Code-barres texte | 7pt | Normal |
| Code wilaya | 9pt | Bold |

---

## üîß Configuration JavaScript

### Fonction d'Impression

```javascript
async function printTicket(colis) {
    // ... (pr√©paration des donn√©es)
    
    // G√©n√©ration du code-barres
    JsBarcode("#ticket-barcode", barcodeValue, {
        format: "CODE128",
        width: 2,           // Largeur des barres
        height: 60,         // Hauteur en pixels
        displayValue: false, // Pas de texte sous le code
        margin: 5,          // Marge autour
        background: "#ffffff",
        lineColor: "#000000"
    });
    
    // Afficher le ticket
    ticketDiv.style.display = 'flex';
    
    // Forcer les dimensions avant impression
    setTimeout(() => {
        const ticketWrapper = document.querySelector('.ticket-wrapper');
        if (ticketWrapper) {
            ticketWrapper.style.width = '100mm';
            ticketWrapper.style.height = '150mm';
            ticketWrapper.style.maxWidth = '100mm';
            ticketWrapper.style.maxHeight = '150mm';
            ticketWrapper.style.minWidth = '100mm';
            ticketWrapper.style.minHeight = '150mm';
            ticketWrapper.style.transform = 'scale(1)';
            ticketWrapper.style.margin = '0';
            ticketWrapper.style.padding = '3mm';
            ticketWrapper.style.boxSizing = 'border-box';
        }
        
        window.print();
    }, 800);
}
```

**D√©lai de 800ms** : Laisse le temps au code-barres de se g√©n√©rer avant l'impression.

---

## üñ®Ô∏è Types d'Imprimantes Compatibles

### 1. Imprimante Thermique
- **Zebra ZD410** ‚úÖ
- **Zebra ZD420** ‚úÖ
- **Brother QL-820NWB** ‚úÖ
- **DYMO LabelWriter 4XL** ‚úÖ

**Configuration** : 
- Format papier : 100 x 150 mm
- Mode : Thermique direct
- Densit√© : 203 dpi ou 300 dpi

### 2. Imprimante Laser/Jet d'encre
- Peut imprimer avec du papier coup√© √† 10x15 cm
- Ou utiliser des feuilles d'√©tiquettes autocollantes 10x15 cm

**Configuration** :
- Format papier personnalis√© : 100 x 150 mm
- Alimentation : Manuelle (pour papier coup√©)
- Qualit√© : Standard (pas besoin de haute qualit√©)

### 3. Imprimante Photo Format Carte Postale
- Format 10x15 cm standard
- Mode : Impression sans bordure

---

## üìù Checklist Avant Impression

### ‚úÖ V√©rifications Navigateur
- [ ] Code-barres visible √† l'√©cran
- [ ] Toutes les donn√©es affich√©es (nom, t√©l, adresse, etc.)
- [ ] Bordure noire visible autour du ticket
- [ ] Pas de d√©bordement du contenu

### ‚úÖ V√©rifications Dialogue d'Impression
- [ ] Format : 100 x 150 mm (ou 10 x 15 cm)
- [ ] Marges : 0 mm (aucune marge)
- [ ] √âchelle : 100% (pas d'ajustement)
- [ ] Graphiques en arri√®re-plan : Activ√©
- [ ] Orientation : Portrait
- [ ] Aper√ßu correct dans la fen√™tre de pr√©visualisation

### ‚úÖ V√©rifications Imprimante
- [ ] Papier 10x15 cm charg√©
- [ ] Imprimante allum√©e et en ligne
- [ ] Pas d'erreur de papier ou d'encre
- [ ] Pilote d'imprimante √† jour

---

## üêõ D√©pannage

### Probl√®me 1 : Le Ticket est Coup√©

**Cause** : Marges d'impression non nulles ou √©chelle incorrecte.

**Solution** :
1. Ouvrir le dialogue d'impression
2. D√©finir **Marges : Aucune** (0 mm)
3. D√©finir **√âchelle : 100%**
4. D√©cocher "Ajuster √† la page"

### Probl√®me 2 : Le Ticket est Trop Petit/Grand

**Cause** : Format de papier incorrect dans les param√®tres.

**Solution** :
1. Ouvrir **Param√®tres d'impression**
2. **Format de papier** ‚Üí **Personnalis√©**
3. Entrer **100 mm x 150 mm** exactement
4. Sauvegarder et r√©essayer

### Probl√®me 3 : Le Code-Barres ne S'Imprime Pas

**Cause** : JsBarcode pas charg√© ou graphiques d√©sactiv√©s.

**Solution** :
1. V√©rifier la console (F12) pour erreurs JavaScript
2. S'assurer que JsBarcode est charg√© :
   ```html
   <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
   ```
3. Activer **Graphiques en arri√®re-plan** dans les param√®tres d'impression

### Probl√®me 4 : Bordures/Ombres ne S'Impriment Pas

**Cause** : Graphiques en arri√®re-plan d√©sactiv√©s.

**Solution** :
1. Dans le dialogue d'impression
2. Cocher **Imprimer les arri√®re-plans** (Chrome/Edge)
3. Ou **Graphiques en arri√®re-plan** (Firefox)

### Probl√®me 5 : Texte Tronqu√© ou D√©bordant

**Cause** : Contenu trop long pour la taille de police.

**Solution** :
- Le CSS utilise `font-size: 7pt` pour le contenu
- Si le texte est tr√®s long, il sera automatiquement tronqu√©
- R√©duire la taille du texte dans les champs (ex: adresse)
- Ou ajuster `font-size` dans `ticket.css`

---

## üéØ Optimisations Appliqu√©es

### 1. Dimensions Forc√©es en JavaScript
```javascript
ticketWrapper.style.width = '100mm';
ticketWrapper.style.height = '150mm';
ticketWrapper.style.minWidth = '100mm';
ticketWrapper.style.maxWidth = '100mm';
// Emp√™che tout redimensionnement automatique
```

### 2. R√®gle @page Stricte
```css
@page {
    size: 100mm 150mm; /* Taille exacte impos√©e */
    margin: 0;
    padding: 0;
}
```

### 3. Suppression de Tous les D√©bordements
```css
overflow: hidden !important;
page-break-inside: avoid !important;
```

### 4. Code-Barres Optimis√© pour 10 cm de Large
```javascript
JsBarcode("#ticket-barcode", value, {
    width: 2,   // Barres fines pour tenir dans 10 cm
    height: 60, // Hauteur raisonnable
    margin: 5   // Petite marge
});
```

---

## üìê Calcul des Marges Internes

### Dimensions Effectives

```
Papier total     : 100 mm x 150 mm
Bordure          : 2 mm (1 mm de chaque c√¥t√©)
Padding interne  : 3 mm

Zone utile       : 94 mm x 144 mm
```

### R√©partition Verticale (approximative)

```
En-t√™te          : ~10 mm
Code tracking    : ~15 mm (avec barcode)
Exp√©diteur       : ~20 mm
Destinataire     : ~25 mm
D√©tails colis    : ~35 mm
Date exp√©dition  : ~8 mm
Signature        : ~20 mm
D√©claration AR   : ~11 mm
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Total            : ~144 mm ‚úÖ
```

---

## üöÄ Utilisation

### Depuis le Dashboard Agent

1. Naviguer vers **Section Colis**
2. Cliquer sur le bouton **üñ®Ô∏è Imprimer** sur un colis
3. Le bordereau s'affiche √† l'√©cran
4. La fen√™tre d'impression s'ouvre automatiquement apr√®s 800ms
5. V√©rifier l'aper√ßu
6. Cliquer sur **Imprimer**

### Depuis le Dashboard Admin

1. Naviguer vers **Section Colis**
2. Cliquer sur le bouton **üñ®Ô∏è Imprimer** sur un colis
3. M√™me processus que pour l'agent

---

## ‚úÖ Validation de l'Impression

### √Ä l'√âcran (Avant Impression)

‚úÖ Le ticket occupe toute la largeur de la div  
‚úÖ Pas de barre de d√©filement horizontal  
‚úÖ Code-barres visible et lisible  
‚úÖ Toutes les sections visibles  
‚úÖ Bordure noire autour du ticket  

### Dans l'Aper√ßu d'Impression

‚úÖ Format : 100 x 150 mm affich√©  
‚úÖ Une seule page  
‚úÖ Pas de zones blanches excessives  
‚úÖ Contenu centr√© et bien align√©  
‚úÖ Code-barres noir et blanc (pas de gris)  

### Sur le Papier Imprim√©

‚úÖ Dimensions exactes : 10 x 15 cm (avec une r√®gle)  
‚úÖ Code-barres scannable avec un lecteur  
‚úÖ Texte lisible (pas trop petit)  
‚úÖ Bordures droites et nettes  
‚úÖ Pas de texte coup√© ou tronqu√©  

---

## üìä Compatibilit√© Navigateurs

| Navigateur | Support @page | Support 100x150mm | Notes |
|------------|---------------|-------------------|-------|
| Chrome ‚úÖ | ‚úÖ Excellent | ‚úÖ Parfait | Recommand√© |
| Edge ‚úÖ | ‚úÖ Excellent | ‚úÖ Parfait | Recommand√© |
| Firefox ‚úÖ | ‚úÖ Bon | ‚úÖ Bon | Fonctionne bien |
| Safari ‚ö†Ô∏è | ‚ö†Ô∏è Partiel | ‚ö†Ô∏è Partiel | Peut n√©cessiter ajustements |
| Opera ‚úÖ | ‚úÖ Bon | ‚úÖ Bon | Bas√© sur Chromium |

**Recommandation** : Utiliser **Google Chrome** ou **Microsoft Edge** pour les meilleurs r√©sultats.

---

## üîó Fichiers Impliqu√©s

### 1. CSS
**Fichier** : `dashboards/agent/css/ticket.css`
- D√©finit le format 10x15 cm
- R√®gle `@page { size: 100mm 150mm; }`
- Styles `@media print`

### 2. JavaScript
**Fichier** : `dashboards/ticket.js`
- Fonction `printTicket(colis)`
- G√©n√©ration code-barres JsBarcode
- For√ßage dimensions avant impression

### 3. HTML
**Fichier** : `dashboards/agent/agent-dashboard.html`
- Conteneur `<div id="ticketColisPrint">`
- Structure du ticket
- √âl√©ments de contenu

---

## üìù Notes Importantes

### ‚ö†Ô∏è Attendre la G√©n√©ration du Code-Barres

Le d√©lai de 800ms dans `printTicket()` est **crucial** :

```javascript
setTimeout(() => {
    window.print();
}, 800);
```

Sans ce d√©lai :
- ‚ùå Le code-barres peut √™tre vide/manquant
- ‚ùå L'impression peut se lancer avant le rendu complet

### ‚ö†Ô∏è Format Papier dans l'Imprimante

Assurez-vous que :
1. Le papier 10x15 cm est **correctement charg√©**
2. L'imprimante est **configur√©e** pour ce format
3. Le **pilote d'imprimante** reconna√Æt le format personnalis√©

### ‚ö†Ô∏è Pas de Mise √† l'√âchelle Automatique

Les param√®tres suivants **d√©sactivent** la mise √† l'√©chelle :
```css
transform: scale(1) !important;
```
```javascript
ticketWrapper.style.transform = 'scale(1)';
```

Cela garantit que **1 mm CSS = 1 mm physique** sur le papier.

---

## ‚úÖ R√©sultat Final

Le bordereau s'imprime correctement sur **papier 10x15 cm** avec :
- ‚úÖ Dimensions exactes (10 x 15 cm)
- ‚úÖ Code-barres lisible par scanner
- ‚úÖ Toutes les informations visibles
- ‚úÖ Qualit√© professionnelle
- ‚úÖ Bordures et sections bien d√©finies
- ‚úÖ Aucun d√©bordement ou texte coup√©

---

**Date de documentation** : 19 Octobre 2025  
**Format cible** : 10 x 15 cm (100 x 150 mm)  
**Status** : ‚úÖ CONFIGUR√â ET OP√âRATIONNEL
